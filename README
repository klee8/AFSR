sum_label.pl written by Kate Lee in April 2016

The script takes in files generated in Octave which label sound files based on a model of a particular species call. In order to reduce false positives, some rules were made to compare the output of different species models. This script goes through all the files together. It looks at the labels in a number of files which were generated by running the same soundfile through a number of models. The script identifies whenever there is a change in one of the files and evaluates the time block until the next change. The summary of labels is calculated using the rules laid out below by Ivan. A summary file with these block and their start and end times are printed to output file.

---bk--------|-------FS-------------|-------bk--------
---bk------------|------os----------|------bk-----
---bk--------|-------os---------|-------bk--------
---bk------------|-------os-----------|-------bk--
---bk--------|--------os--------|--------bk-------

evaluate ->  |   |              |   | |       etc.


The script takes in two files:
    sum_me.txt - a list of all the model files to sum
    categories.txt - a list of all the categories (i.e. the bird models and 'noise', 'background' and 'other_sb')

usage :
perl sum_label.pl




The rules I have used doing this summary are:

1. If all the files have the same category, keep that category.

2. The “noise” should be maintained every time it appear in one of the five models.

3. The  “background” should be kept every time it appear in at least one of the five models, with two exceptions:

   -Exception 1:  when “background” appears at the same time as “noise” take the “noise” category.

   -Exception 2:  when “background” appears at the same time as two different bird species, keep the "other_sb” category.

4. When a bird species is identified in one file and all other files show the "other_sb" category, keep the bird species. (ex: one model indicate GFP and all the others indicate “other_sb”, keep GFP)

5. When there are 3 “categories” identified among the five models:

   example: if two of the categories are bird species and the other is “other_sb” or “background”, “other_sb” should be used as the summary from the beginning of the bird species which started first and go until the end of the second species.

6- When there are 4 ”categories” identified among the five models, use “other_sb”.


